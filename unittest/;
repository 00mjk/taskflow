#define DOCTEST_CONFIG_IMPLEMENT_WITH_MAIN
#include "doctest.h"
#include <taskflow.hpp>
#include <iostream>
#include <thread>
#include <vector>
#include <array>
#include <utility>
#include <future>

TEST_CASE("TaskFlow"){
  tf::Taskflow tf(std::thread::hardware_concurrency());
  REQUIRE(tf.num_workers() == std::thread::hardware_concurrency());
  
  const size_t nof_tasks {100};
  std::atomic<size_t> counter {0};
 
  std::array<std::pair<int64_t,std::future<void>, nof_tasks> tasks;
  for(int i=0;i<nof_tasks;i++){
    tasks.emplace_back(tf.emplace([&counter]() {counter += 1;}));
  }

}


